#!/usr/bin/env python3
"""
Code Quality Validation Script
Auto-generated by GitRead Test Generator
"""

import subprocess
import sys
from pathlib import Path


def run_linting():
    """Run code linting checks."""
    try:
        result = subprocess.run(['flake8', '.'], capture_output=True, text=True)
        if result.returncode == 0:
            print("âœ… Linting passed")
        else:
            print("âŒ Linting failed:")
            print(result.stdout)
        return result.returncode == 0
    except FileNotFoundError:
        print("âš ï¸ flake8 not found, skipping linting")
        return True


def run_type_checking():
    """Run type checking if applicable."""
    try:
        result = subprocess.run(['mypy', '.'], capture_output=True, text=True)
        if result.returncode == 0:
            print("âœ… Type checking passed")
        else:
            print("âŒ Type checking failed:")
            print(result.stdout)
        return result.returncode == 0
    except FileNotFoundError:
        print("âš ï¸ mypy not found, skipping type checking")
        return True


def validate_structure():
    """Validate project structure."""
    required_files = ['README.md', 'requirements.txt']
    missing_files = []
    
    for file in required_files:
        if not Path(file).exists():
            missing_files.append(file)
    
    if missing_files:
        print(f"âŒ Missing required files: {missing_files}")
        return False
    else:
        print("âœ… Project structure validation passed")
        return True


if __name__ == "__main__":
    print("ğŸ” Running code quality validation...")
    
    checks = [
        run_linting(),
        run_type_checking(),
        validate_structure()
    ]
    
    if all(checks):
        print("
âœ… All validation checks passed!")
        sys.exit(0)
    else:
        print("
âŒ Some validation checks failed.")
        sys.exit(1)
